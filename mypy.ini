[mypy]
python_version = 3.12
strict = true
warn_unused_ignores = true
pretty = true

# Only check existing top-level source dirs; subpackages are under "app/"
# If a dir below doesn't exist in this repo, remove it from the list.
files = app, cli, deploy, tools

# Exclude all test code
exclude = (?x)(
    ^tests/      # skip test files and helpers
)

# Keep edge layers from blocking on untyped defs for now
[mypy-app.routes.*]
disallow_untyped_defs = False
[mypy-app.middleware.*]
disallow_untyped_defs = False
[mypy-app.webhooks.*]
disallow_untyped_defs = False
[mypy-deploy.*]
disallow_untyped_defs = False
[mypy-scripts.*]
disallow_untyped_defs = False

# Keep redis stubs strict (we install types-redis via dev deps)
[mypy-redis.*]
ignore_missing_imports = False
